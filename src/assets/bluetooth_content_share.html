<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/></head><body>function openMap() {<br>&nbsp; if (!<a href="http://navigator.geolocation">navigator.geolocation</a>) {<br>&nbsp;&nbsp;&nbsp; alert("Geolocation is not supported on this device.");<br>&nbsp;&nbsp;&nbsp; return;<br>&nbsp; }<br><br>&nbsp; // Show feedback immediately<br>&nbsp; alert("Fetching your location...");<br><br>&nbsp; <a href="http://navigator.geolocation.getCurrentPosition">navigator.geolocation.getCurrentPosition</a>(<br>&nbsp;&nbsp;&nbsp; position =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const userLat = <a href="http://position.coords.latitude">position.coords.latitude</a>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const userLng = <a href="http://position.coords.longitude">position.coords.longitude</a>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Your venue coordinates<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const venueLat = <a href="tel:37.7749">37.7749</a>;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const venueLng = -<a href="tel:122.4194">122.4194</a>;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Google Maps URL<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; const url = `<a href="https://www.google.com/maps/dir/?api=1&amp;origin">https://www.google.com/maps/dir/?api=1&amp;origin</a>=${userLat},${userLng}&amp;destination=${venueLat},${venueLng}&amp;travelmode=driving`;<br><br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; // Open in new tab (mobile browsers sometimes block if not from a direct click)<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <a href="http://window.location.href">window.location.href</a> = url; // use <a href="http://location.href">location.href</a> instead of <a href="http://window.open">window.open</a><br>&nbsp;&nbsp;&nbsp; },<br>&nbsp;&nbsp;&nbsp; error =&gt; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; switch (<a href="http://error.code">error.code</a>) {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case error.PERMISSION_DENIED:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Please allow location access to open directions.");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case error.POSITION_UNAVAILABLE:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Location unavailable. Try again or check GPS settings.");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; case <a href="http://error.TIMEOUT">error.TIMEOUT</a>:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Location request timed out. Try again.");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; break;<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; default:<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; alert("Unable to get your location. Please try again later.");<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>&nbsp;&nbsp;&nbsp; },<br>&nbsp;&nbsp;&nbsp; {<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; enableHighAccuracy: true,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; timeout: <a href="tel:8000">8000</a>, // 8 seconds max<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; maximumAge: 0<br>&nbsp;&nbsp;&nbsp; }<br>&nbsp; );<br>}</body></html>